<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>VORTEX | Evaluación Cognitiva</title>

<style>
*{box-sizing:border-box}

body{
margin:0;
font-family:Inter,system-ui,sans-serif;
background:#0b1020;
color:white;
display:flex;
justify-content:center;
align-items:center;
height:100vh;
overflow:hidden;
}

.container{
width:720px;
max-width:92%;
background:#12182f;
padding:60px;
border-radius:22px;
box-shadow:0 0 80px rgba(123,44,255,.25);
position:relative;
overflow:hidden;
}

h1,h2{margin:0 0 20px}

p{color:#9ca3af}

.progress{
height:4px;
background:#1f2947;
border-radius:10px;
margin-bottom:40px;
overflow:hidden;
}

.bar{
height:100%;
width:0%;
background:linear-gradient(90deg,#7b2cff,#a855f7);
transition:.5s ease;
}

.option{
padding:16px;
margin:14px 0;
background:#1f2947;
border-radius:14px;
cursor:pointer;
transition:.25s;
}

.option:hover{
background:#2d3a66;
transform:translateY(-2px);
}

.selected{
background:#7b2cff !important;
}

button{
margin-top:30px;
padding:14px 28px;
border:none;
border-radius:12px;
background:#7b2cff;
color:white;
font-weight:600;
cursor:pointer;
transition:.3s;
}

button:hover{
background:#9f67ff;
}

.hidden{
display:none;
}

.log{
margin-top:40px;
font-size:14px;
color:#9ca3af;
line-height:1.8;
min-height:150px;
}

.status-title{
margin-bottom:30px;
}

</style>
</head>

<body>

<div class="container" id="app">

<!-- INTRO -->
<div id="intro">
<h1>Evaluación Cognitiva Avanzada</h1>
<p>Este proceso analizará tu arquitectura de estudio y generará un sistema personalizado.</p>
<button onclick="iniciar()">Iniciar Evaluación</button>
</div>

<!-- TEST -->
<div id="test" class="hidden">
<div class="progress"><div class="bar" id="bar"></div></div>
<h2 id="question"></h2>
<div id="answers"></div>
<button onclick="next()">Continuar</button>
</div>

<!-- ANALISIS -->
<div id="analisis" class="hidden">
<h2 class="status-title" id="statusTitle">Inicializando Motor Cognitivo</h2>
<div class="progress"><div class="bar" id="analysisBar"></div></div>
<div class="log" id="log"></div>
</div>

</div>

<script>

const preguntas=[
{
q:"Cuando enfrentas un examen importante...",
a:[
{text:"Planifico cada fase con precisión",v:1},
{text:"Trabajo en bloques intensivos",v:2},
{text:"Adapto según inspiración",v:3}
]
},
{
q:"Tu rendimiento aumenta cuando...",
a:[
{text:"Existe estructura clara",v:1},
{text:"Hay presión controlada",v:2},
{text:"Hay estímulo y variación",v:3}
]
},
{
q:"Tu mayor fricción mental es...",
a:[
{text:"Desorganización",v:1},
{text:"Pérdida de constancia",v:2},
{text:"Distracciones",v:3}
]
},
{
q:"Prefieres estudiar en...",
a:[
{text:"Ambiente estructurado",v:1},
{text:"Entornos intensos",v:2},
{text:"Entornos flexibles",v:3}
]
}
];

let actual=0;
let puntos={1:0,2:0,3:0};
let seleccion=null;

function iniciar(){
document.getElementById("intro").classList.add("hidden");
document.getElementById("test").classList.remove("hidden");
render();
}

function render(){
let p=preguntas[actual];
document.getElementById("question").innerText=p.q;
let cont=document.getElementById("answers");
cont.innerHTML="";

p.a.forEach(op=>{
let div=document.createElement("div");
div.className="option";
div.innerText=op.text;
div.onclick=()=>{
document.querySelectorAll(".option").forEach(o=>o.classList.remove("selected"));
div.classList.add("selected");
seleccion=op.v;
};
cont.appendChild(div);
});

document.getElementById("bar").style.width=(actual/preguntas.length)*100+"%";
}

function next(){
if(!seleccion){alert("Selecciona una opción");return;}
puntos[seleccion]++;
seleccion=null;
actual++;

if(actual>=preguntas.length){
analizar();
return;
}

render();
}

function analizar(){
document.getElementById("test").classList.add("hidden");
document.getElementById("analisis").classList.remove("hidden");

const pasos=[
"Validando patrones de respuesta...",
"Evaluando consistencia cognitiva...",
"Mapeando estructura de concentración...",
"Detectando puntos críticos de fricción...",
"Optimizando arquitectura estratégica...",
"Asignando modelo personalizado...",
"Encriptando perfil...",
"Sincronizando entorno..."
];

const log=document.getElementById("log");
const bar=document.getElementById("analysisBar");
let progreso=0;
let i=0;

function ejecutar(){
if(i<pasos.length){
log.innerHTML+="✓ "+pasos[i]+"<br>";
progreso+=100/pasos.length;
bar.style.width=progreso+"%";
i++;
setTimeout(ejecutar,650);
}else{
document.getElementById("statusTitle").innerText="Perfil Generado Correctamente";
log.innerHTML+="<br><span style='color:#7b2cff;'>Sistema listo.</span>";
setTimeout(finalizar,1200);
}
}

setTimeout(ejecutar,800);
}

function finalizar(){
let perfil=1;
if(puntos[2]>puntos[1]&&puntos[2]>puntos[3])perfil=2;
else if(puntos[3]>puntos[1]&&puntos[3]>puntos[2])perfil=3;

localStorage.setItem("perfil",perfil);
localStorage.setItem("evaluacion_completa","si");

window.location.href="analisisdashboard.html";
}

</script>

</body>
</html>
