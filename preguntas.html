<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Diagnóstico IA</title>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<style>
body{
font-family: Arial;
background:#0b0f1a;
color:white;
display:flex;
justify-content:center;
align-items:center;
height:100vh;
margin:0;
}

.container{
width:90%;
max-width:400px;
text-align:center;
}

button{
padding:12px;
margin-top:20px;
width:100%;
border:none;
border-radius:8px;
background:#6366f1;
color:white;
font-size:16px;
}

.hidden{
display:none;
}
</style>
</head>

<body>

<div class="container">

<h2 id="pregunta">Cargando...</h2>

<div id="opciones"></div>

<div id="loading" class="hidden">
<h2>Analizando tu perfil con IA...</h2>
<p>Creando diagnóstico personalizado</p>
</div>

<div id="resultado" class="hidden">
<h2>Tu diagnóstico está listo</h2>
<p id="textoResultado"></p>

<button onclick="irChat()">Hablar con la IA</button>
</div>

</div>

<script>

const preguntas = [
"¿Cuál es tu mayor preocupación ahora mismo?",
"¿Qué área quieres mejorar?",
"¿Cuánto estrés sientes diariamente?",
"¿Sientes que tienes dirección en tu vida?"
];

const respuestas = [];

let paso = 0;

function mostrarPregunta(){
document.getElementById("pregunta").innerText = preguntas[paso];

const opcionesDiv = document.getElementById("opciones");
opcionesDiv.innerHTML = "";

["Mucho","Normal","Poco"].forEach(op=>{
const btn = document.createElement("button");
btn.innerText = op;
btn.onclick = ()=>responder(op);
opcionesDiv.appendChild(btn);
});
}

function responder(valor){

respuestas.push(valor);
paso++;

if(paso < preguntas.length){
mostrarPregunta();
}else{
iniciarAnalisis();
}

}

async function iniciarAnalisis(){

document.getElementById("pregunta").style.display="none";
document.getElementById("opciones").style.display="none";

document.getElementById("loading").classList.remove("hidden");

setTimeout(generarResultado,3000);

}

function generarResultado(){

document.getElementById("loading").classList.add("hidden");

document.getElementById("resultado").classList.remove("hidden");

let texto = "Tu perfil muestra alto potencial pero falta claridad estratégica. La IA recomienda enfoque en hábitos, disciplina y toma de decisiones.";

document.getElementById("textoResultado").innerText = texto;

}

function irChat(){

window.location.href="chat.html";

}

mostrarPregunta();

</script>

</body>
</html>
